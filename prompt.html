<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Loading Prompt... | Kokosima AI</title>

    <meta property="og:type" content="article">
    <meta property="og:title" id="meta-title" content="Kokosima AI">
    <meta property="og:description" id="meta-desc" content="Temukan prompt AI cinematic gratis.">
    <meta property="og:url" id="meta-url" content="https://kokosimareels.pages.dev/">
    <meta property="og:image" id="meta-img" content="https://kokosimareels.pages.dev/images/default-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <link rel="stylesheet" href="style.css">
    
    <style>
        .prompt-detail-img {
            width: 100%;
            max-width: 500px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        #promptText {
            width: 100%;
            height: 200px;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: monospace;
            margin-bottom: 15px;
            resize: none;
        }
    </style>
</head>
<body>

    <header class="top-bar">
        <a href="index.html" class="btn-back" id="backBtn">‚Üê BACK</a>
        <a href="index.html" style="text-decoration: none; color: inherit;">
            <span class="logo">Kokosima</span>
        </a>
    </header>

    <main class="prompt-page-wrapper">
        <div class="prompt-card">
            <img id="main-image" src="" alt="Prompt Preview" class="prompt-detail-img" style="display:none;">
            
            <h2 id="title">Loading...</h2>
            <textarea id="promptText" readonly spellcheck="false"></textarea>
            <div style="display: flex; justify-content: flex-end;">
                <button class="btn btn-primary" onclick="copyPrompt()" id="copyBtn">üìã Copy Prompt</button>
            </div>
        </div>
    </main>

    <script src="data.js"></script>
    
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');

        // Pastikan database sudah terload
        if (!id || typeof PROMPT_DATABASE === 'undefined' || !PROMPT_DATABASE[id]) {
            window.location.href = "index.html";
        } else {
            const data = PROMPT_DATABASE[id];
            const domain = "https://kokosimareels.pages.dev"; 
            const fullImgUrl = domain + "/images/" + id + ".jpg";

            // 1. Update Teks & UI
            document.title = data.title + " | Kokosima AI";
            document.getElementById("title").textContent = data.title;
            document.getElementById("promptText").value = data.text;
            
            const imgElement = document.getElementById("main-image");
            imgElement.src = "images/" + id + ".jpg";
            imgElement.style.display = "block";

            // 2. Update Meta Tags (Penting untuk Share WA/FB)
            document.getElementById('meta-title').setAttribute("content", data.title);
            document.getElementById('meta-desc').setAttribute("content", data.text.substring(0, 150) + "...");
            document.getElementById('meta-img').setAttribute("content", fullImgUrl);
            document.getElementById('meta-url').setAttribute("content", window.location.href);

            // 3. Tombol Back Kembali ke Posisi Scroll Sebelumnya
            document.getElementById("backBtn").href = `index.html#${id}`;
        }

        async function copyPrompt() {
            const text = document.getElementById("promptText").value;
            const btn = document.getElementById("copyBtn");
            if (!text) return;
            try {
                await navigator.clipboard.writeText(text);
                btn.innerHTML = "‚úÖ Copied!";
                btn.style.backgroundColor = "#28a745";
                setTimeout(() => { 
                    btn.innerHTML = "üìã Copy Prompt"; 
                    btn.style.backgroundColor = ""; 
                }, 2000);
            } catch (err) { 
                alert("Gagal menyalin!"); 
            }
        }
    </script>
</body>
</html>
